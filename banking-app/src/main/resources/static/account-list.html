<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Account List</title>
  <link rel="stylesheet" href="styless.css">
</head>
<body>
<header>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="create-account.html">Create Account</a></li>
      <li><a href="account-list.html">View Accounts</a></li>
      <li><a href="deposit.html">Deposit</a></li>
      <li><a href="withdraw.html">Withdraw</a></li>
    </ul>
  </nav>
</header>

<section id="accounts-list">
  <ul id="accountDetails"></ul>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const accountDetailsList = document.getElementById('accountDetails');

    window.deleteAccount = function(accountId) {
        if (confirm('Are you sure you want to delete this account?')) {
            fetch(`/api/accounts/${accountId}`, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    alert('Account deleted successfully!');
                    loadAccounts();
                } else {
                    alert('Failed to delete account.');
                }
            })
            .catch(error => console.error('Error:', error));
        }
    };

    function loadAccounts() {
        fetch('/api/accounts')
            .then(response => response.json())
            .then(data => {
                accountDetailsList.innerHTML = '';
                data.forEach(account => {
                    const li = document.createElement('li');
                    li.innerHTML = `ID: ${account.id}, Name: ${account.accountHolderName}, Balance: ${account.balance}
                    <button onclick="deleteAccount(${account.id})">Delete</button>`;
                    accountDetailsList.appendChild(li);
                });
            })
            .catch(error => console.error('Error:', error));
    }

    loadAccounts();
});
</script>
</body>
</html>
