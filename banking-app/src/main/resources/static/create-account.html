<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Account</title>
  <link rel="stylesheet" href="styles1.css">
</head>
<body>
<header>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="create-account.html">Create Account</a></li>
      <li><a href="account-list.html">View Accounts</a></li>
      <li><a href="deposit.html">Deposit</a></li>
      <li><a href="withdraw.html">Withdraw</a></li>
    </ul>
  </nav>
</header>

<section id="account-form">
  <form id="createAccountForm">
    <label for="accountHolderName">Account Holder Name:</label>
    <input type="text" id="accountHolderName" required>
    <label for="initialBalance">Initial Balance:</label>
    <input type="number" id="initialBalance" required>
    <button type="submit">Create Account</button>
  </form>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const accountForm = document.getElementById('createAccountForm');

    accountForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const accountHolderName = document.getElementById('accountHolderName').value;
        const initialBalance = document.getElementById('initialBalance').value;

        fetch('/api/accounts', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ accountHolderName, balance: initialBalance })
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            alert('Account created successfully!');
            window.location.href = 'account-list.html'; // Redirect to account list
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Failed to create account. Please try again.');
        });
    });
});
</script>
</body>
</html>
